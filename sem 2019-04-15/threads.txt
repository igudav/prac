После форка остается работать только одна текущая нить.
Переключение нитий очень дорогое удовольствие

exit() после main завершает весь процесс, в том числе все нити в процессе
поэтому detached нити могут потеряться => делаем join

если передавать по ссылке через thread и выводить адреса, то адреса будут разными.
То есть где-то там ссылка протухает и все равно происходит копирование
надо передавать std::ref(str) вместо просто str

race conditionals можно ловить с помощью -fsanitize=thread